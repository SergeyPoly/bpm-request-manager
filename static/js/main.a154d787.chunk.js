(this["webpackJsonpbpm-request-manager"]=this["webpackJsonpbpm-request-manager"]||[]).push([[0],{250:function(e){e.exports=JSON.parse('{"authPage":{"username":"\u0406\u043c\'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","password":"\u041f\u0430\u0440\u043e\u043b\u044c","email":"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430","login":"\u0423\u0432\u0456\u0439\u0442\u0438","remind":"\u041d\u0430\u0433\u0430\u0434\u0430\u0442\u0438","forgot":"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?","return":"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f","loginError":"\u043d\u0435\u0432\u0456\u0440\u043d\u0438\u0439 \u043b\u043e\u0433\u0456\u043d \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c","serverError":"\u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0443"},"header":{"user":"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447","logout":"\u0412\u0438\u0445\u0456\u0434"},"requestPage":{"newRequest":"\u041d\u043e\u0432\u0438\u0439 \u0437\u0430\u043f\u0438\u0442","tableColNumber":"\u041d\u043e\u043c\u0435\u0440","tableColStatus":"\u0421\u0442\u0430\u0442\u0443\u0441","tableColCreated":"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e","tableColRequest":"\u0417\u0430\u043f\u0438\u0442","send":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438","details":"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0456\u0448\u0435","status":"\u0421\u0442\u0430\u0434\u0456\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0443"}}')},251:function(e){e.exports=JSON.parse('{"authPage":{"username":"User name","password":"Password","email":"E-mail","login":"Log in","remind":"Remind","forgot":"Forgot password?","return":"Return","loginError":"wrong login or password","serverError":"server error"},"header":{"user":"User","logout":"Log out"},"requestPage":{"newRequest":"New request","tableColNumber":"Number","tableColStatus":"Status","tableColCreated":"Created","tableColRequest":"Request","send":"Send","details":"Details","status":"Process stage"}}')},259:function(e,t,n){e.exports=n(454)},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},287:function(e,t,n){},293:function(e,t,n){},308:function(e,t){},310:function(e,t){},437:function(e,t,n){},438:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),o=n(26),s=n(128),i=n(456),u=n(184);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,466)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},f=n(35),m=n(464),d=n(40),p=n(82),h=Object(p.b)({name:"auth",initialState:{isAuthorized:!1,isFetching:!1,reminderActive:!1,username:null,errorStatus:null},reducers:{loginRequest:function(e){return Object(d.a)({},e,{isFetching:!0,errorStatus:null})},fetchLoginSuccess:function(e,t){return Object(d.a)({},e,{isAuthorized:!0,isFetching:!1,username:t.payload})},fetchLoginFailed:function(e,t){return Object(d.a)({},e,{isAuthorized:!1,isFetching:!1,errorStatus:t.payload})},logout:function(e){return Object(d.a)({},e,{isAuthorized:!1,userName:null,errorStatus:null})},toggleAuthPageForm:function(e){return Object(d.a)({},e,{reminderActive:!e.reminderActive,errorStatus:null})}}}),b=h.actions,v=b.loginRequest,g=b.fetchLoginSuccess,O=b.fetchLoginFailed,y=b.logout,j=b.toggleAuthPageForm,w=n(67),k=n(463),E={loginForm:{fields:[{type:"text",name:"username",id:Object(k.a)()},{type:"password",name:"password",id:Object(k.a)()}]},reminderForm:{fields:[{type:"text",name:"username",id:Object(k.a)()},{type:"email",name:"email",id:Object(k.a)()}]}},x={basic:"button-basic",transparent:"button-transparent"},S=(n(267),function(e){var t=e.text,n=e.type,r=e.classType,c=e.additionalClass,o=e.handleClick,s=e.disabled,i=s?"button-disabled":"",u="button ".concat(x[r]," ").concat(c," ").concat(i);return a.a.createElement("button",{type:n,className:u,onClick:o,disabled:s},t)}),I=S;S.defaultProps={additionalClass:"",type:"button",disabled:!1};n(268);var C=function(e){var t=e.text,n=Object(w.d)(),r=n.errors,c=n.touched,o=Boolean(Object.keys(r).length),s=Boolean(!Object.keys(c).length);return a.a.createElement("div",{className:"form-submit-container"},a.a.createElement(I,{text:t,classType:"basic",type:"submit",disabled:o||s}))},P=(n(269),function(e){var t=e.text;return a.a.createElement("div",{className:"error-message"},a.a.createElement("span",null,t))}),_=n(11),A=n.n(_),T=n(31),D=n(97),F=n(98),N=n(146),L=n(149),q=n(84),R=n.n(q),M=function(){function e(){var t=this;Object(D.a)(this,e),this.BASE_URL="".concat("https://bpm.codot.pro:443/engine-rest/engine/default"),this._accessToken=null,this._tenantId=null,this._username=null,this._handle401=function(){t._accessToken=null,t._tenantId=null,t._username=null,t.removeTenantData(),Object(f.f)().push("/")},this._getCommonOptions=function(){var e=t.loadAccessToken().accessToken;return{headers:{Authorization:"Basic ".concat(e)}}},this.saveTenantData=function(e,n,r){return t._username=e,t._accessToken=r,t._tenantId=n,sessionStorage.setItem("username",e),sessionStorage.setItem("tenantId",n),sessionStorage.setItem("accessToken",r),{username:e,tenantId:n,accessToken:r}},this.removeTenantData=function(){sessionStorage.removeItem("username"),sessionStorage.removeItem("tenantId"),sessionStorage.removeItem("accessToken")}}return Object(F.a)(e,[{key:"get",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r=this,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},Object.assign(n,this._getCommonOptions()),e.abrupt("return",R.a.get("".concat(this.BASE_URL,"/").concat(t),n).then((function(e){return e.data})).catch((function(e){return r._handleHttpError(e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r,a=this,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2&&void 0!==c[2]?c[2]:{},Object.assign(r,this._getCommonOptions()),e.abrupt("return",R.a.post("".concat(this.BASE_URL,"/").concat(t),n,r).then((function(e){return{data:e.data,status:e.status}})).catch((function(e){return a._handleHttpError(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r,a=this,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2&&void 0!==c[2]?c[2]:{},Object.assign(r,this._getCommonOptions()),e.abrupt("return",R.a.put("".concat(this.BASE_URL,"/").concat(t),n,r).catch((function(e){return a._handleHttpError(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r=this,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},Object.assign(n,this._getCommonOptions()),e.abrupt("return",R.a.delete("".concat(this.BASE_URL,"/").concat(t),n).then((function(e){return e.data})).catch((function(e){return r._handleHttpError(e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r,a=this,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2&&void 0!==c[2]?c[2]:{},Object.assign(r,this._getCommonOptions()),e.abrupt("return",R.a.patch("".concat(this.BASE_URL,"/").concat(t),n,r).catch((function(e){return a._handleHttpError(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleHttpError",value:function(e){if(401!==e.response.status)throw e;return this._handle401()}},{key:"loadAccessToken",value:function(){var e=sessionStorage.getItem("accessToken");return this._accessToken=e,{accessToken:e}}},{key:"loadUsername",value:function(){var e=sessionStorage.getItem("username");return this._username=e,{username:e}}},{key:"loadTenantId",value:function(){var e=sessionStorage.getItem("tenantId");return this._tenantId=e,{tenantId:e}}},{key:"accessToken",get:function(){return this._accessToken?this._accessToken:this.loadAccessToken()}},{key:"username",get:function(){return this._username?this._username:this.loadUsername()}},{key:"tenantId",get:function(){return this._tenantId?this._tenantId:this.loadTenantId()}}]),e}(),B=new(function(e){Object(L.a)(n,e);var t=Object(N.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"login",value:function(){var e=Object(T.a)(A.a.mark((function e(t){var n,r,a,c,o,s,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,a="".concat(btoa("".concat(n.toString(),":").concat(r.toString()))),c={headers:{Authorization:"Basic ".concat(a)}},e.next=5,R.a.get("".concat(this.BASE_URL,"/tenant?userMember=").concat(n),c);case 5:return o=e.sent,s=o.data,i=s[0].id,this.saveTenantData(n,i,a),e.abrupt("return",s[0]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.removeTenantData()}}]),n}(M)),z=n(91),U=n(148),V=(n(287),function(e){var t=e.label,n=e.options,r=Object(U.a)(e,["label","options"]),c=r.type,o=r.name,s=Object(w.c)(r),i=Object(z.a)(s,3),u=i[0],l=i[2],f=Object(m.a)("common").i18n.language,d="checkbox"===c?"form-label-secondary":"form-label-primary",p="checkbox"===c?"form-field-secondary":"file"===c?"form-field-file--".concat(f):"form-field-primary",h=a.a.createElement("label",{className:d,htmlFor:o},t),b=n?a.a.createElement("select",Object.assign({className:p},u,r),a.a.createElement("option",{value:""}),n.map((function(e){var t=e.id,n=e.name;return a.a.createElement("option",{value:t,key:t},n)}))):"file"===c?a.a.createElement("input",Object.assign({className:p,id:o},r,{onChange:function(e){var t=e.currentTarget.files[0],n=t.name;(function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))})(t).then((function(e){var t=e.split(",")[1];return{filename:n,base64file:t}})).then((function(e){return l.setValue(e)}))}})):a.a.createElement("input",Object.assign({className:p,id:o},u,r));return a.a.createElement("div",null,"checkbox"!==c?h:null,b,"checkbox"===c?h:null)}),H=function(e){var t=e.reminderActive,n=Object(c.c)(),r=Object(c.d)((function(e){return e.auth.errorStatus}),c.b),o=Object(m.a)("common").t,s=t?E.reminderForm:E.loginForm,i=o(t?"authPage.remind":"authPage.login"),u=r?401===r?o("authPage.loginError"):"".concat(o("authPage.serverError"),": ").concat(r):"",l=Object.fromEntries(s.fields.map((function(e){return[e.name,""]}))),f=s.fields.map((function(e){return a.a.createElement(V,{key:e.id,type:e.type,name:e.name,required:!0,label:o("authPage.".concat(e.name))})})),d={initialValues:l,onSubmit:function(e){t?(console.log(e),console.log("login: testUser, password: testPassword")):n(function(e){var t=e.username,n=e.password;return function(){var e=Object(T.a)(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(v()),e.prev=1,e.next=4,B.login({username:t,password:n});case 4:r(g(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),"InvalidCharacterError"===e.t0.name?r(O(401)):r(O(e.t0.response.status));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}(e))}};return a.a.createElement(w.b,Object.assign({},d,{enableReinitialize:!0}),a.a.createElement(w.a,null,a.a.createElement("div",null,f,a.a.createElement(P,{text:u}),a.a.createElement(C,{text:i}))))},K=(n(293),function(){var e=Object(c.d)((function(e){return e.auth.reminderActive}),c.b),t=Object(c.c)(),n=Object(m.a)("common").t;return a.a.createElement("div",{className:"auth-page"},a.a.createElement("div",{className:"auth-page__form"},a.a.createElement(H,{reminderActive:e}),a.a.createElement(I,{text:n(e?"authPage.return":"authPage.remind"),classType:"transparent",additionalClass:"auth-page__reminder",handleClick:function(){return t(j())}})))}),X=n(114),J=n(150),$=Object(p.b)({name:"processes",initialState:{tableLoading:!1,drawerActive:!1,newProcessModalActive:!1,stepsModalActive:!1,processStepsData:{processSteps:[],currentStepIndex:0},tableData:[],drawerOptions:[],formOptions:{formFields:[],name:null,key:null}},reducers:{requestTableData:function(e){return Object(d.a)({},e,{tableLoading:!0})},setTableData:function(e,t){return Object(d.a)({},e,{tableData:t.payload,tableLoading:!1})},setDrawerOptions:function(e,t){return Object(d.a)({},e,{drawerOptions:t.payload})},toggleDrawerStatus:function(e){return Object(d.a)({},e,{drawerActive:!e.drawerActive})},setFormOptions:function(e,t){return Object(d.a)({},e,{formOptions:t.payload})},toggleNewProcessModalStatus:function(e){return Object(d.a)({},e,{newProcessModalActive:!e.newProcessModalActive})},toggleStepsModalStatus:function(e){return Object(d.a)({},e,{stepsModalActive:!e.stepsModalActive})},setProcessSteps:function(e,t){return Object(d.a)({},e,{processStepsData:t.payload})},clearData:function(e){return Object(d.a)({},e,{tableData:[],drawerOptions:[],formOptions:{formFields:[],name:null,key:null}})}}}),W=$.actions,Z=W.requestTableData,G=W.setTableData,Q=W.setDrawerOptions,Y=W.toggleDrawerStatus,ee=W.setFormOptions,te=W.toggleNewProcessModalStatus,ne=W.toggleStepsModalStatus,re=W.setProcessSteps,ae=W.clearData,ce=new(function(e){Object(L.a)(n,e);var t=Object(N.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"getProcessesId",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"process-instance",t=this.loadUsername(),n=t.username,r={variables:[{name:"Initiator",operator:"eq",value:"".concat(n)}],sorting:[{sortBy:"definitionKey",sortOrder:"asc"},{sortBy:"instanceId",sortOrder:"desc"}]},e.next=5,this.post("process-instance",r);case 5:return a=e.sent,c=a.data,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProcessStatus",value:function(){var e=Object(T.a)(A.a.mark((function e(t){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="task?processInstanceId=".concat(t),e.next=3,this.get(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessXML",value:function(){var e=Object(T.a)(A.a.mark((function e(t){var n,r,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.loadTenantId(),r=n.tenantId,a="process-definition/key/".concat(t,"/tenant-id/").concat(r,"/xml"),e.next=4,this.get(a);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessesDefinitions",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,n,r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loadTenantId(),n=t.tenantId,r="process-definition?tenantIdIn=".concat(n),e.next=4,this.get(r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startNewProcess",value:function(){var e=Object(T.a)(A.a.mark((function e(t,n){var r,a,c,o,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.loadTenantId(),a=r.tenantId,c={variables:n,withVariablesInReturn:!0},o="process-definition/key/".concat(t,"/tenant-id/").concat(a,"/start"),s=this.post(o,c),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(M)),oe=function(){return function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Z()),e.prev=1,e.next=4,ce.getProcessesId().then((function(e){return e.map((function(e){return{id:e.id,number:e.id.slice(0,13),processKey:e.definitionId.split(":")[0]}}))})).then((function(e){return t(se(e))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},se=function(e){return function(){var t=Object(T.a)(A.a.mark((function t(n){var r,a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=Object(X.a)(e),a=e.map((function(e){return ce.getProcessStatus(e.id)})),Promise.all(a).then((function(e){return e.map((function(e){var t=Object(z.a)(e,1)[0],n=r.find((function(e){return e.id===t.executionId}));return Object(d.a)({},n,{created:t.created,status:t.name})}))})).then((function(e){n(ie(e))}))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ie=function(e){return function(){var t=Object(T.a)(A.a.mark((function t(n){var r,a,c,o,s;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=Object(X.a)(e),a=[],c=r.map((function(e){return e.processKey})),o=Array.from(new Set(c)),s=o.map((function(e){return ce.getProcessXML(e)})),Promise.all(s).then((function(e){return e.map((function(e){var t,n=e.bpmn20Xml;Object(J.parseString)(n,(function(e,n){t=n}));var r=t["bpmn:definitions"]["bpmn:process"][0].$;return a.push(r),a}))})).then((function(e){a.forEach((function(e){r=r.map((function(t){return t.processKey===e.id?Object(d.a)({},t,{name:e.name}):t}))})),r=r.map((function(e){e.id;return Object(U.a)(e,["id"])}));var t={year:"numeric",month:"numeric",day:"numeric"};r.forEach((function(e,n){e.key=n+1;var r=new Date(Date.parse(e.created));e.created=r.toLocaleString("ru",t)})),n(G(r))}))}catch(i){console.log(i)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ue=n(460),le=n(465),fe=n(46),me=n(457),de=(n(320),n(230)),pe=n.n(de),he=n(461),be=function(){var e,t=Object(c.d)((function(e){return e.processes.tableData}),c.b),n=Object(c.d)((function(e){return e.processes.tableLoading}),c.b),o=Object(m.a)("common").t,s=Object(c.c)(),i=Object(r.useState)(""),u=Object(z.a)(i,2),l=u[0],f=u[1],d=Object(r.useState)(""),p=Object(z.a)(d,2),h=p[0],b=p[1],v=null,g=function(e,t,n){t(),f(e[0]),b(n)},O=function(e){e(),f("")},y=function(e,t){var n=e.map((function(e){return e[t]}));return Array.from(new Set(n)).map((function(e){return{text:e,value:e}}))},j=y(t,"status"),w=y(t,"name"),k=(e="number",{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,c=t.confirm,o=t.clearFilters;return a.a.createElement("div",{style:{padding:8}},a.a.createElement(ue.a,{ref:function(e){v=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return g(r,c,e)},style:{width:188,marginBottom:8,display:"block"}}),a.a.createElement(le.b,null,a.a.createElement(fe.a,{type:"primary",onClick:function(){return g(r,c,e)},icon:a.a.createElement(he.a,null),size:"small",style:{width:90}},"Search"),a.a.createElement(fe.a,{onClick:function(){return O(o)},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return a.a.createElement(he.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return v.select()}),100)},render:function(t){return h===e?a.a.createElement(pe.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[l],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}),E=k.filterDropdown,x=k.filterIcon,S=k.onFilter,I=k.onFilterDropdownVisibleChange,C=k.render,P=[{title:o("requestPage.tableColNumber"),dataIndex:"number",key:"number",className:"table_text",filterDropdown:E,filterIcon:x,onFilter:S,onFilterDropdownVisibleChange:I,render:C},{title:o("requestPage.tableColStatus"),dataIndex:"status",key:"status",filters:j,className:"table_text",onFilter:function(e,t){return 0===t.status.indexOf(e)}},{title:o("requestPage.tableColCreated"),dataIndex:"created",key:"created",className:"table_text",defaultSortOrder:"descend",sorter:function(e,t){var n=function(e){var t=e.split(".");return new Date(t[2],t[1]-1,t[0])};return n(e.created)-n(t.created)}},{title:o("requestPage.tableColRequest"),dataIndex:"name",key:"name",filters:w,className:"table_text",onFilter:function(e,t){return 0===t.name.indexOf(e)}}];return a.a.createElement(me.a,{dataSource:t,columns:P,pagination:{position:["bottomCenter"]},size:"middle",loading:n,onRow:function(e,t){var n=e.processKey,r=e.status;return{onClick:function(e){s(function(e,t){return function(){var n=Object(T.a)(A.a.mark((function n(r){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ce.getProcessXML(e).then((function(e){var n,a=e.bpmn20Xml;Object(J.parseString)(a,(function(e,t){n=t}));var c=n["bpmn:definitions"]["bpmn:process"][0]["bpmn:userTask"].map((function(e){return e.$.name})),o=c.indexOf(t);r(re({processSteps:c,currentStepIndex:o})),r(ne()),console.log()}));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}()}(n,r))}}},rowClassName:function(e,t){return"custom-row-style"}})},ve=(n(437),function(){var e=Object(c.d)((function(e){return e.processes.drawerActive}),c.b),t=Object(m.a)("common").t,n=Object(c.c)(),o=e?"hidden":"";return Object(r.useEffect)((function(){n(oe()),n(function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.getProcessesDefinitions().then((function(e){return e.map((function(e){return{key:e.key,name:e.name}}))})).then((function(e){var n=Array.from(new Set(e.map(JSON.stringify))).map(JSON.parse);t(Q(n))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())}),[]),a.a.createElement("div",{className:"processes-page"},a.a.createElement(be,null),a.a.createElement("div",{className:"processes-page__new-request ".concat(o),onClick:function(){n(Y())}},a.a.createElement("span",null,t("requestPage.newRequest"))))}),ge=function(){var e=Object(c.d)((function(e){return e.auth.isAuthorized}),c.b);return a.a.createElement(f.c,null,a.a.createElement(f.a,{exact:!0,path:"/",render:function(){return e?a.a.createElement(ve,null):a.a.createElement(K,null)}}))},Oe=function(){var e=Object(m.a)("common").i18n;return a.a.createElement("div",{style:{width:"100%"}},a.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"DEMO"),a.a.createElement("span",{style:{float:"left",marginLeft:"5px"}},'use "testUser", "testPassword" to authorize'),a.a.createElement("div",{style:{float:"right"}},a.a.createElement(I,{text:"UA",classType:"transparent",handleClick:function(){return e.changeLanguage("uk")}}),a.a.createElement("span",null,"|"),a.a.createElement(I,{text:"EN",classType:"transparent",handleClick:function(){return e.changeLanguage("en")}})))},ye=function(){var e=Object(c.d)((function(e){return e.auth.username}),c.b),t=Object(m.a)("common").t,n=Object(c.c)(),r="".concat(t("header.user"),": ").concat(e);return a.a.createElement("div",null,a.a.createElement("span",{style:{paddingRight:"20px"}},r),a.a.createElement(I,{text:t("header.logout"),classType:"transparent",handleClick:function(){n(function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.logout();case 2:t(y());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(ae())}}))},je=(n(438),function(){var e=Object(c.d)((function(e){return e.auth.isAuthorized}),c.b)?a.a.createElement(ye,null):a.a.createElement(Oe,null);return a.a.createElement("header",{className:"header"},e)}),we=n(462),ke=function(){var e=Object(c.d)((function(e){return e.processes.drawerActive})),t=Object(c.d)((function(e){return e.processes.drawerOptions})),n=Object(c.c)(),r=Object(m.a)("common").t,o=t.map((function(e){return a.a.createElement("p",{key:e.key,onClick:function(){var t,r;n(Y()),n((t=e.key,r=e.name,function(){var e=Object(T.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.getProcessXML(t).then((function(e){var a,c=e.bpmn20Xml;Object(J.parseString)(c,(function(e,t){a=t}));var o=a["bpmn:definitions"]["bpmn:process"][0]["bpmn:startEvent"][0]["bpmn:extensionElements"][0]["camunda:formData"][0]["camunda:formField"].map((function(e){return e["camunda:value"]?Object(d.a)({},e.$,{options:e["camunda:value"].map((function(e){return e.$}))}):e.$}));n(ee({formFields:o,name:r,key:t})),n(te())}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()))},style:{cursor:"pointer"}},e.name)}));return a.a.createElement(we.a,{title:r("requestPage.newRequest"),placement:"right",closable:!1,onClose:function(){n(Y())},visible:e},o)},Ee=n(459),xe=function(e){switch(e){case"string":return"text";case"long":return"number";case"file":return"file";case"boolean":return"checkbox";case"enum":return"select";default:return""}},Se=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return e.processes.formOptions})),n=t.formFields,r=t.key,o=Object(m.a)("common").t,s=Object.fromEntries(n.map((function(e){var t=e.type,n=e.id,r=e.defaultValue;return"boolean"===t?[n,r]:[n,""]}))),i=Object.fromEntries(n.map((function(e){var t,n=e.id,r=e.type;return[n,(t=r,"long"===t?"double":"enum"===t?"string":t)]}))),u=n.map((function(e){return a.a.createElement(V,{key:Object(k.a)(),type:xe(e.type),name:e.id,label:e.label,placeholder:e.defaultValue,options:e.options})})),l={initialValues:s,validate:function(e){var t={};for(var n in e)e[n]||"boolean"===i[n]||(t[n]="required");return t},onSubmit:function(t,n){var a,c,o={};for(var s in t)o[s]={value:t[s],type:i[s]};for(var u in o){if("date"===o[u].type){var l=new Date(o[u].value),f=l.getTimezoneOffset()/-60,m=f>=10?"+".concat(f,"00"):"+0".concat(f,"00");o[u].value=l.toISOString().replace("Z",m)}"file"===o[u].type&&(o[u]={value:o[u].value.base64file,type:"file",valueInfo:{filename:o[u].value.filename,encoding:"Base64"}})}e((a=r,c=o,function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.startNewProcess(a,c).then((function(e){200===e.status&&t(oe())}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())),e(te()),n.resetForm({values:{}})}};return a.a.createElement(w.b,Object.assign({},l,{enableReinitialize:!0}),a.a.createElement(w.a,null,a.a.createElement("div",null,u,a.a.createElement(C,{text:o("requestPage.send")}))))},Ie=function(){var e=Object(c.d)((function(e){return e.processes.newProcessModalActive})),t=Object(c.d)((function(e){return e.processes.formOptions})).name,n=Object(c.c)();return a.a.createElement(Ee.a,{title:t,visible:e,onOk:function(){n(te())},centered:!0,onCancel:function(){n(te())},footer:null,width:350},a.a.createElement(Se,null))},Ce=n(458),Pe=function(){var e=Ce.a.Step,t=Object(c.d)((function(e){return e.processes.processStepsData})),n=t.processSteps,r=t.currentStepIndex,o=n.map((function(t){return a.a.createElement(e,{title:t,description:"step description, no data"})}));return a.a.createElement(Ce.a,{direction:"vertical",size:"small",current:r},o)},_e=function(){var e=Object(c.d)((function(e){return e.processes.stepsModalActive})),t=Object(c.c)(),n=Object(m.a)("common").t;return a.a.createElement(Ee.a,{title:n("requestPage.status"),visible:e,onOk:function(){t(ne())},centered:!0,onCancel:function(){t(ne())},footer:null,width:350},a.a.createElement(Pe,null))},Ae=(n(453),function(){return a.a.createElement("div",{className:"container app-wrapper"},a.a.createElement("div",{className:"app-header"},a.a.createElement(je,null)),a.a.createElement("div",{className:"app-content"},a.a.createElement(ge,null)),a.a.createElement(ke,null),a.a.createElement(Ie,null),a.a.createElement(_e,null))}),Te=n(62),De=Object(Te.c)({auth:h.reducer,processes:$.reducer}),Fe=Object(X.a)(Object(p.c)({serializableCheck:!1})),Ne=Object(p.a)({reducer:De,middleware:Fe,devTools:!1}),Le=n(250),qe=n(251);u.a.init({interpolation:{escapeValue:!1},lng:"uk",resources:{uk:{common:Le},en:{common:qe}}}),Object(o.render)(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:Ne},a.a.createElement(s.a,null,a.a.createElement(i.a,{i18n:u.a},a.a.createElement(Ae,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),l()}},[[259,1,2]]]);
//# sourceMappingURL=main.a154d787.chunk.js.map